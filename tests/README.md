# Testing PySmali

PySmali does not yet have conventional unit tests.

Currently, testing is done by parsing and unparsing smali files and comparing the original to the reconstructed.

There are four levels of results when comparing the original and reconstructed smali files:
1. `[PASS]` They are exactly the same
2. `[WARNING]` They have different whitespace, but are semantically the same. This result is fine for unofficial or handwritten smali files, but is not acceptable for smali files generated by [baksmali](https://github.com/JesusFreke/smali).
3. `[FAIL]` They are different
4. `[FATAL]` The original could not even be parsed

There are a total of 6,846 tests contained in the `tests.tar.xz` archive. The reason for the archive is there's no good reason to contain 50+ MB worth of test files in the repository.

To run the tests execute `run_tests.py`. This python script will read directly from the `tests.tar.xz` archive.

The `tests.tar.xz` file can be updated in the following way:
1. Unpack the contents of `tests.tar.xz` to `src/`
2. Add additional, valid, smali files
3. Execute `generate_tests.py`

When making pull requests with additional tests, **DO NOT** include the `src/` folder.